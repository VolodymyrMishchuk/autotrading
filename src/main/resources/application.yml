spring:
  application:
    name: autotrade

  datasource:
    url: jdbc:postgresql://${DATABASE_HOST:127.0.0.1}:${DATABASE_PORT:5432}/${DATABASE_NAME:autotrade}
    username: ${DATABASE_USER:postgres}
    password: ${DATABASE_PASSWORD:postgres_password}
    driver-class-name: org.postgresql.Driver

  mail:
    host: smtp.gmail.com
    port: 587
    username: ${GMAIL_USERNAME:placeholder}
    password: ${GMAIL_PASSWORD:placeholder}
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
            required: true
          ssl:
            trust: smtp.gmail.com

  kafka:
    bootstrap-servers: ${SPRING_KAFKA_BOOTSTRAP_SERVERS:localhost:29092}

    consumer:
      group-id: autotrade-signals
      auto-offset-reset: latest
      key-deserializer: org.apache.kafka.common.serialization.StringDeserializer
      value-deserializer: org.apache.kafka.common.serialization.StringDeserializer
      enable-auto-commit: true

    producer:
      key-serializer: org.apache.kafka.common.serialization.StringSerializer
      value-serializer: org.apache.kafka.common.serialization.StringSerializer
      retries: 3
      acks: all

    properties:
      client.dns.lookup: use_all_dns_ips
      security.protocol: PLAINTEXT

  jwt:
    secret: ${JWT_SECRET:placeholder}
    ttl-millis: ${JWT_TTL:43200000}

  email:
    verification:
      expiry-minutes: ${EMAIL_VERIFICATION_TTL_MINUTES:60}
      base-url: ${BACKEND_CONFIRM_URL:http://localhost:8080/auth/confirm}

  frontend:
    base-url: ${FRONTEND_BASE_URL:http://localhost:3000}

  reset:
    expiry-minutes: ${RESET_TTL_MINUTES:60}

  liquibase:
    clear-checksums: true
    contexts: dev-seed

  sms:
    verify:
      provider: twilio
      twilio:
        account-sid: ${TWILIO_ACCOUNT_SID:placeholder}
        auth-token: ${TWILIO_AUTH_TOKEN:placeholder}
        service-sid: ${TWILIO_VERIFY_SERVICE_SID:placeholder}

  captcha:
    recaptcha:
      site: ${RECAPTCHA_SITE_KEY:}
      secret: ${RECAPTCHA_SECRET_KEY:}

  jpa:
    show-sql: true
    properties:
      hibernate.format_sql: true

management:
  endpoints:
    web:
      exposure:
        include: health,info
  endpoint:
    health:
      show-details: always

logging:
  level:
    com.mishchuk.autotrade.config.TokenAuthFilter: DEBUG
    org.springframework.security: INFO
    org.hibernate.SQL: DEBUG
    org.hibernate.orm.jdbc.bind: TRACE
    org.springframework.kafka: INFO
    kafka: INFO

email:
  verification:
    expiry-minutes: ${spring.email.verification.expiry-minutes}
    base-url: ${spring.email.verification.base-url}

frontend:
  base-url: ${spring.frontend.base-url}

jwt:
  secret: ${spring.jwt.secret}
  ttl-millis: ${spring.jwt.ttl-millis}

# === Custom Application Properties ===
app:
  kafka:
    topic: ${APP_KAFKA_TOPIC:signals.raw}

app_kafka:
  topic: ${APP_KAFKA_TOPIC:signals.raw}
